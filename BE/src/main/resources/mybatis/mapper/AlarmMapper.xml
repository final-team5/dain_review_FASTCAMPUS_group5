<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.dain_review.be.mapper.AlarmMapper">
    <insert id="insert">
        INSERT INTO alarm (user_seq, target_seq, target_type, message)
        VALUES (#{userSeq}, #{targetSeq}, #{targetType}, #{message})
    </insert>
    <update id="update">
        UPDATE alarm
        <set>
            message = #{message}
        </set>
        <where>
            seq = #{seq}
        </where>
    </update>
    <delete id="delete">
        DELETE FROM alarm
        WHERE seq = #{seq}
    </delete>

    <select id="selectList" resultType="kr.co.dain_review.be.model.alarm.Alarm">
        SELECT seq, user_seq as userSeq, target_seq as targetSeq, target_type as targetType, message
        FROM alarm
        <where>
            <if test="userSeq!=null">AND user_seq = #{userSeq}</if>
            <if test="check!=null">AND `check` = #{check}</if>
        </where>
        LIMIT #{page}, 10
    </select>

    <select id="selectListCount" resultType="java.lang.Integer">
        SELECT COUNT(seq)
        FROM alarm
        <where>
            <if test="userSeq!=null">AND user_seq = #{userSeq}</if>
            <if test="check!=null">AND `check` = #{check}</if>
        </where>
    </select>
</mapper>